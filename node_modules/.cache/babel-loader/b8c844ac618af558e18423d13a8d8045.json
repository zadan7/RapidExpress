{"ast":null,"code":"'use strict';\n\nvar packageJson = require('../package.json');\n\nvar chalk = require('chalk');\n\nvar boxen = require('boxen');\n\nvar crossGlobal = typeof window !== 'undefined' ? window : typeof globalThis !== 'undefined' ? globalThis : typeof global !== 'undefined' ? global : self;\n/**\n * Inherit the prototype methods from one constructor into another.\n * Source: https://github.com/kaelzhang/node-util-inherits\n * @param {function} ctor Constructor function which needs to inherit the prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n * @private\n */\n\nfunction inherits(ctor, superCtor) {\n  if (ctor === undefined || ctor === null) {\n    throw new TypeError('The constructor to \"inherits\" must not be null or undefined');\n  }\n\n  if (superCtor === undefined || superCtor === null) {\n    throw new TypeError('The super constructor to \"inherits\" must not be null or undefined');\n  }\n\n  if (superCtor.prototype === undefined) {\n    throw new TypeError('The super constructor to \"inherits\" must have a prototype');\n  }\n\n  ctor.super_ = superCtor;\n  ctor.prototype = Object.create(superCtor.prototype, {\n    constructor: {\n      value: ctor,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n}\n/**\n * Determines if the current environment is a NodeJS environment.\n * @private\n */\n\n\nfunction isNodeEnv() {\n  return typeof window === 'undefined' && typeof process !== 'undefined' && process.versions != null && process.versions.node != null;\n}\n/**\n * Resolves environment variable if available.\n *\n * @param {string} envKey A name of env variable.\n * @return {void|string} Returns requested env variable or void.\n * @private\n */\n\n\nfunction getEnvVariable(envKey) {\n  var areEnvVarsAvailable = !!(typeof process !== 'undefined' && process && process.env);\n\n  if (areEnvVarsAvailable && process.env[envKey] != null) {\n    return process.env[envKey];\n  }\n}\n/**\n * JavaScript Client Detection\n * @private\n */\n\n\nfunction getBrowserDetails() {\n  var browser = navigator.appName;\n  var browserVersion = '' + parseFloat(navigator.appVersion);\n  var nameOffset, verOffset, ix; // Opera\n\n  if ((verOffset = navigator.userAgent.indexOf('Opera')) != -1) {\n    browser = 'Opera';\n    browserVersion = navigator.userAgent.substring(verOffset + 6);\n\n    if ((verOffset = navigator.userAgent.indexOf('Version')) != -1) {\n      browserVersion = navigator.userAgent.substring(verOffset + 8);\n    }\n  } // MSIE\n  else if ((verOffset = navigator.userAgent.indexOf('MSIE')) != -1) {\n    browser = 'Microsoft Internet Explorer';\n    browserVersion = navigator.userAgent.substring(verOffset + 5);\n  } //IE 11 no longer identifies itself as MS IE, so trap it\n  //http://stackoverflow.com/questions/17907445/how-to-detect-ie11\n  else if (browser == 'Netscape' && navigator.userAgent.indexOf('Trident/') != -1) {\n    browser = 'Microsoft Internet Explorer';\n    browserVersion = navigator.userAgent.substring(verOffset + 5);\n\n    if ((verOffset = navigator.userAgent.indexOf('rv:')) != -1) {\n      browserVersion = navigator.userAgent.substring(verOffset + 3);\n    }\n  } // Chrome\n  else if ((verOffset = navigator.userAgent.indexOf('Chrome')) != -1) {\n    browser = 'Chrome';\n    browserVersion = navigator.userAgent.substring(verOffset + 7);\n  } // Safari\n  else if ((verOffset = navigator.userAgent.indexOf('Safari')) != -1) {\n    browser = 'Safari';\n    browserVersion = navigator.userAgent.substring(verOffset + 7);\n\n    if ((verOffset = navigator.userAgent.indexOf('Version')) != -1) {\n      browserVersion = navigator.userAgent.substring(verOffset + 8);\n    } // Chrome on iPad identifies itself as Safari. Actual results do not match what Google claims\n    //  at: https://developers.google.com/chrome/mobile/docs/user-agent?hl=ja\n    //  No mention of chrome in the user agent string. However it does mention CriOS, which presumably\n    //  can be keyed on to detect it.\n\n\n    if (navigator.userAgent.indexOf('CriOS') != -1) {\n      //Chrome on iPad spoofing Safari...correct it.\n      browser = 'Chrome'; //Don't believe there is a way to grab the accurate version number, so leaving that for now.\n    }\n  } // Firefox\n  else if ((verOffset = navigator.userAgent.indexOf('Firefox')) != -1) {\n    browser = 'Firefox';\n    browserVersion = navigator.userAgent.substring(verOffset + 8);\n  } // Other browsers\n  else if ((nameOffset = navigator.userAgent.lastIndexOf(' ') + 1) < (verOffset = navigator.userAgent.lastIndexOf('/'))) {\n    browser = navigator.userAgent.substring(nameOffset, verOffset);\n    browserVersion = navigator.userAgent.substring(verOffset + 1);\n\n    if (browser.toLowerCase() == browser.toUpperCase()) {\n      browser = navigator.appName;\n    }\n  } // trim the browser version string\n\n\n  if ((ix = browserVersion.indexOf(';')) != -1) browserVersion = browserVersion.substring(0, ix);\n  if ((ix = browserVersion.indexOf(' ')) != -1) browserVersion = browserVersion.substring(0, ix);\n  if ((ix = browserVersion.indexOf(')')) != -1) browserVersion = browserVersion.substring(0, ix);\n  return [browser, browserVersion].join('-');\n}\n\nfunction getBrowserOsDetails() {\n  var os = 'unknown';\n  var clientStrings = [{\n    s: 'Windows 10',\n    r: /(Windows 10.0|Windows NT 10.0)/\n  }, {\n    s: 'Windows 8.1',\n    r: /(Windows 8.1|Windows NT 6.3)/\n  }, {\n    s: 'Windows 8',\n    r: /(Windows 8|Windows NT 6.2)/\n  }, {\n    s: 'Windows 7',\n    r: /(Windows 7|Windows NT 6.1)/\n  }, {\n    s: 'Windows Vista',\n    r: /Windows NT 6.0/\n  }, {\n    s: 'Windows Server 2003',\n    r: /Windows NT 5.2/\n  }, {\n    s: 'Windows XP',\n    r: /(Windows NT 5.1|Windows XP)/\n  }, {\n    s: 'Windows 2000',\n    r: /(Windows NT 5.0|Windows 2000)/\n  }, {\n    s: 'Windows ME',\n    r: /(Win 9x 4.90|Windows ME)/\n  }, {\n    s: 'Windows 98',\n    r: /(Windows 98|Win98)/\n  }, {\n    s: 'Windows 95',\n    r: /(Windows 95|Win95|Windows_95)/\n  }, {\n    s: 'Windows NT 4.0',\n    r: /(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/\n  }, {\n    s: 'Windows CE',\n    r: /Windows CE/\n  }, {\n    s: 'Windows 3.11',\n    r: /Win16/\n  }, {\n    s: 'Android',\n    r: /Android/\n  }, {\n    s: 'Open BSD',\n    r: /OpenBSD/\n  }, {\n    s: 'Sun OS',\n    r: /SunOS/\n  }, {\n    s: 'Chrome OS',\n    r: /CrOS/\n  }, {\n    s: 'Linux',\n    r: /(Linux|X11(?!.*CrOS))/\n  }, {\n    s: 'iOS',\n    r: /(iPhone|iPad|iPod)/\n  }, {\n    s: 'Mac OS X',\n    r: /Mac OS X/\n  }, {\n    s: 'Mac OS',\n    r: /(Mac OS|MacPPC|MacIntel|Mac_PowerPC|Macintosh)/\n  }, {\n    s: 'QNX',\n    r: /QNX/\n  }, {\n    s: 'UNIX',\n    r: /UNIX/\n  }, {\n    s: 'BeOS',\n    r: /BeOS/\n  }, {\n    s: 'OS/2',\n    r: /OS\\/2/\n  }, {\n    s: 'Search Bot',\n    r: /(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\\/Teoma|ia_archiver)/\n  }];\n\n  for (var id in clientStrings) {\n    var cs = clientStrings[id];\n\n    if (cs.r.test(navigator.userAgent)) {\n      os = cs.s;\n      break;\n    }\n  }\n\n  var osVersion = 'unknown';\n\n  if (/Windows/.test(os)) {\n    osVersion = /Windows (.*)/.exec(os)[1];\n    os = 'Windows';\n  }\n\n  switch (os) {\n    case 'Mac OS':\n    case 'Mac OS X':\n    case 'Android':\n      osVersion = /(?:Android|Mac OS|Mac OS X|MacPPC|MacIntel|Mac_PowerPC|Macintosh) ([\\.\\_\\d]+)/.exec(navigator.userAgent)[1];\n      break;\n\n    case 'iOS':\n      osVersion = /OS (\\d+)_(\\d+)_?(\\d+)?/.exec(navigator.appVersion);\n      osVersion = osVersion[1] + '.' + osVersion[2] + '.' + (osVersion[3] | 0);\n      break;\n  }\n\n  return [os, osVersion].join('-');\n}\n/**\n * For checking process.env always use `hasOwnProperty`\n * Some providers could throw an error when trying to access env variables that does not exists\n * @private */\n\n\nfunction getNodeRuntimeEnv() {\n  var runtimeEnvs = [{\n    name: 'Netlify',\n    check: function check() {\n      return process.env.hasOwnProperty('NETLIFY_IMAGES_CDN_DOMAIN');\n    }\n  }, {\n    name: 'Vercel',\n    check: function check() {\n      return process.env.hasOwnProperty('VERCEL');\n    }\n  }, {\n    name: 'Heroku',\n    check: function check() {\n      return process.env.hasOwnProperty('PATH') && process.env.PATH.indexOf('.heroku') !== -1;\n    }\n  }, {\n    name: 'AWS Lambda',\n    check: function check() {\n      return process.env.hasOwnProperty('AWS_LAMBDA_FUNCTION_VERSION');\n    }\n  }, {\n    name: 'GCP Cloud Functions',\n    check: function check() {\n      return process.env.hasOwnProperty('_') && process.env._.indexOf('google') !== -1;\n    }\n  }, {\n    name: 'GCP Compute Instances',\n    check: function check() {\n      return process.env.hasOwnProperty('GOOGLE_CLOUD_PROJECT');\n    }\n  }, {\n    name: 'Azure Cloud Functions',\n    check: function check() {\n      return process.env.hasOwnProperty('WEBSITE_FUNCTIONS_AZUREMONITOR_CATEGORIES');\n    }\n  }, {\n    name: 'Azure Compute',\n    check: function check() {\n      return process.env.hasOwnProperty('ORYX_ENV_TYPE') && process.env.hasOwnProperty('WEBSITE_INSTANCE_ID') && process.env.ORYX_ENV_TYPE === 'AppService';\n    }\n  }, {\n    name: 'Mongo Stitch',\n    check: function check() {\n      return typeof crossGlobal.StitchError === 'function';\n    }\n  }, {\n    name: 'Render',\n    check: function check() {\n      return process.env.hasOwnProperty('RENDER_SERVICE_ID');\n    }\n  }, {\n    name: 'Begin',\n    check: function check() {\n      return process.env.hasOwnProperty('BEGIN_DATA_SCOPE_ID');\n    }\n  }];\n  var detectedEnv = runtimeEnvs.find(function (env) {\n    return env.check();\n  });\n  return detectedEnv ? detectedEnv.name : 'unknown';\n}\n/**\n * If defined, returns the given value. Otherwise, returns the default value.\n * @param {any} obj The given value.\n * @param {any} def The default value.\n * @private\n */\n\n\nfunction defaults(obj, def) {\n  if (obj === undefined) {\n    return def;\n  } else {\n    return obj;\n  }\n}\n/**\n * Used for functions that take an options objects.\n * Fills in defaults for options not provided.\n * Throws errors for provided options that aren't recognized.\n * A default value of `undefined` is used to indicate that the option must be provided.\n * @private\n */\n\n\nfunction applyDefaults(provided, defaults) {\n  var out = {};\n\n  for (var providedKey in provided) {\n    if (!(providedKey in defaults)) {\n      throw new Error('No such option ' + providedKey);\n    }\n\n    out[providedKey] = provided[providedKey];\n  }\n\n  for (var defaultsKey in defaults) {\n    if (!(defaultsKey in out)) {\n      out[defaultsKey] = defaults[defaultsKey];\n    }\n  }\n\n  return out;\n}\n/**\n * Returns a new object without any keys where the value would be null or undefined.\n * @private\n * */\n\n\nfunction removeNullAndUndefinedValues(object) {\n  var res = {};\n\n  for (var key in object) {\n    var val = object[key];\n\n    if (val !== null && val !== undefined) {\n      res[key] = val;\n    }\n  }\n\n  return res;\n}\n/**\n * Returns a new object without any keys where the value would be undefined.\n * @private\n * */\n\n\nfunction removeUndefinedValues(object) {\n  var res = {};\n\n  for (var key in object) {\n    var val = object[key];\n\n    if (val !== undefined) {\n      res[key] = val;\n    }\n  }\n\n  return res;\n}\n/**\n * Returns a boolean stating if the given object has a given property\n * @private\n * */\n\n\nfunction checkInstanceHasProperty(obj, prop) {\n  return typeof obj === 'object' && obj !== null && Boolean(obj[prop]);\n}\n\nfunction formatUrl(base, path, query) {\n  query = typeof query === 'object' ? querystringify(query) : query;\n  return [base, path ? path.charAt(0) === '/' ? '' : '/' + path : '', query ? query.charAt(0) === '?' ? '' : '?' + query : ''].join('');\n}\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\n\n\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n  var pairs = [],\n      value,\n      key; //\n  // Optionally prefix with a '?' if needed\n  //\n\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (checkInstanceHasProperty(obj, key)) {\n      value = obj[key]; //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n\n      if (!value && (value === null || value === undefined || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value); //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n\n      if (key === null || value === null) continue;\n      pairs.push(key + '=' + value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\n\n\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n/**\n * Merge two objects into one\n * @param obj1\n * @param obj2\n * @returns obj3 a new object based on obj1 and obj2\n */\n\n\nfunction mergeObjects(obj1, obj2) {\n  var obj3 = {};\n\n  for (var attrname in obj1) {\n    obj3[attrname] = obj1[attrname];\n  }\n\n  for (var attrname in obj2) {\n    obj3[attrname] = obj2[attrname];\n  }\n\n  return obj3;\n}\n/**\n * Resolves which Fetch API compatible function to use. If an override is\n * provided, returns the override. If no override and the global (window) has\n * \"fetch\" property, return the native fetch. Otherwise returns the cross-fetch polyfill.\n *\n * @param {?function} fetchOverride An Fetch API compatible function to use.\n * @returns {function} A Fetch API compatible function.\n * @private\n */\n\n\nfunction resolveFetch(fetchOverride) {\n  if (typeof fetchOverride === 'function') {\n    return fetchOverride;\n  }\n\n  if (typeof crossGlobal.fetch === 'function') {\n    // NB. Rebinding to global is needed for Safari\n    return crossGlobal.fetch.bind(crossGlobal);\n  }\n\n  return require('cross-fetch');\n}\n\nfunction notifyAboutNewVersion() {\n  var isNotified;\n\n  var checkAndNotify = function checkAndNotify(checkNewVersion) {\n    if (!isNodeEnv() || isNotified || !checkNewVersion) return;\n\n    function onResponse(latestVersion) {\n      var isNewVersionAvailable = latestVersion > packageJson.version;\n\n      if (isNewVersionAvailable) {\n        console.info(boxen('New ' + packageJson.name + ' version available ' + chalk.dim(packageJson.version) + chalk.reset(' → ') + chalk.green(latestVersion) + \"\\nChangelog: https://github.com/\".concat(packageJson.repository, \"/blob/main/CHANGELOG.md\"), {\n          padding: 1,\n          borderColor: 'yellow'\n        }));\n      }\n    }\n\n    isNotified = true;\n    resolveFetch()('https://registry.npmjs.org/' + packageJson.name).then(function (resp) {\n      return resp.json();\n    }).then(function (json) {\n      return onResponse(json['dist-tags'].latest);\n    }).catch(function (err) {\n      console.error('Unable to check new driver version');\n      console.error(err);\n    });\n  };\n\n  return checkAndNotify;\n}\n\nmodule.exports = {\n  notifyAboutNewVersion: notifyAboutNewVersion,\n  crossGlobal: crossGlobal,\n  mergeObjects: mergeObjects,\n  formatUrl: formatUrl,\n  querystringify: querystringify,\n  inherits: inherits,\n  isNodeEnv: isNodeEnv,\n  getEnvVariable: getEnvVariable,\n  defaults: defaults,\n  applyDefaults: applyDefaults,\n  removeNullAndUndefinedValues: removeNullAndUndefinedValues,\n  removeUndefinedValues: removeUndefinedValues,\n  checkInstanceHasProperty: checkInstanceHasProperty,\n  getBrowserDetails: getBrowserDetails,\n  getBrowserOsDetails: getBrowserOsDetails,\n  getNodeRuntimeEnv: getNodeRuntimeEnv,\n  resolveFetch: resolveFetch\n};","map":{"version":3,"sources":["/home/verified/node_modules/faunadb/src/_util.js"],"names":["packageJson","require","chalk","boxen","crossGlobal","window","globalThis","global","self","inherits","ctor","superCtor","undefined","TypeError","prototype","super_","Object","create","constructor","value","enumerable","writable","configurable","isNodeEnv","process","versions","node","getEnvVariable","envKey","areEnvVarsAvailable","env","getBrowserDetails","browser","navigator","appName","browserVersion","parseFloat","appVersion","nameOffset","verOffset","ix","userAgent","indexOf","substring","lastIndexOf","toLowerCase","toUpperCase","join","getBrowserOsDetails","os","clientStrings","s","r","id","cs","test","osVersion","exec","getNodeRuntimeEnv","runtimeEnvs","name","check","hasOwnProperty","PATH","_","ORYX_ENV_TYPE","StitchError","detectedEnv","find","defaults","obj","def","applyDefaults","provided","out","providedKey","Error","defaultsKey","removeNullAndUndefinedValues","object","res","key","val","removeUndefinedValues","checkInstanceHasProperty","prop","Boolean","formatUrl","base","path","query","querystringify","charAt","prefix","pairs","isNaN","encode","push","length","input","encodeURIComponent","e","mergeObjects","obj1","obj2","obj3","attrname","resolveFetch","fetchOverride","fetch","bind","notifyAboutNewVersion","isNotified","checkAndNotify","checkNewVersion","onResponse","latestVersion","isNewVersionAvailable","version","console","info","dim","reset","green","repository","padding","borderColor","then","resp","json","latest","catch","err","error","module","exports"],"mappings":"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","sourcesContent":["'use strict'\n\nvar packageJson = require('../package.json')\nvar chalk = require('chalk')\nvar boxen = require('boxen')\n\nvar crossGlobal =\n  typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof global !== 'undefined'\n    ? global\n    : self\n\n/**\n * Inherit the prototype methods from one constructor into another.\n * Source: https://github.com/kaelzhang/node-util-inherits\n * @param {function} ctor Constructor function which needs to inherit the prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n * @private\n */\nfunction inherits(ctor, superCtor) {\n  if (ctor === undefined || ctor === null) {\n    throw new TypeError(\n      'The constructor to \"inherits\" must not be null or undefined'\n    )\n  }\n\n  if (superCtor === undefined || superCtor === null) {\n    throw new TypeError(\n      'The super constructor to \"inherits\" must not be null or undefined'\n    )\n  }\n\n  if (superCtor.prototype === undefined) {\n    throw new TypeError(\n      'The super constructor to \"inherits\" must have a prototype'\n    )\n  }\n\n  ctor.super_ = superCtor\n  ctor.prototype = Object.create(superCtor.prototype, {\n    constructor: {\n      value: ctor,\n      enumerable: false,\n      writable: true,\n      configurable: true,\n    },\n  })\n}\n\n/**\n * Determines if the current environment is a NodeJS environment.\n * @private\n */\nfunction isNodeEnv() {\n  return (\n    typeof window === 'undefined' &&\n    typeof process !== 'undefined' &&\n    process.versions != null &&\n    process.versions.node != null\n  )\n}\n\n/**\n * Resolves environment variable if available.\n *\n * @param {string} envKey A name of env variable.\n * @return {void|string} Returns requested env variable or void.\n * @private\n */\nfunction getEnvVariable(envKey) {\n  var areEnvVarsAvailable = !!(\n    typeof process !== 'undefined' &&\n    process &&\n    process.env\n  )\n\n  if (areEnvVarsAvailable && process.env[envKey] != null) {\n    return process.env[envKey]\n  }\n}\n\n/**\n * JavaScript Client Detection\n * @private\n */\nfunction getBrowserDetails() {\n  var browser = navigator.appName\n  var browserVersion = '' + parseFloat(navigator.appVersion)\n  var nameOffset, verOffset, ix\n\n  // Opera\n  if ((verOffset = navigator.userAgent.indexOf('Opera')) != -1) {\n    browser = 'Opera'\n    browserVersion = navigator.userAgent.substring(verOffset + 6)\n    if ((verOffset = navigator.userAgent.indexOf('Version')) != -1) {\n      browserVersion = navigator.userAgent.substring(verOffset + 8)\n    }\n  }\n  // MSIE\n  else if ((verOffset = navigator.userAgent.indexOf('MSIE')) != -1) {\n    browser = 'Microsoft Internet Explorer'\n    browserVersion = navigator.userAgent.substring(verOffset + 5)\n  }\n\n  //IE 11 no longer identifies itself as MS IE, so trap it\n  //http://stackoverflow.com/questions/17907445/how-to-detect-ie11\n  else if (\n    browser == 'Netscape' &&\n    navigator.userAgent.indexOf('Trident/') != -1\n  ) {\n    browser = 'Microsoft Internet Explorer'\n    browserVersion = navigator.userAgent.substring(verOffset + 5)\n    if ((verOffset = navigator.userAgent.indexOf('rv:')) != -1) {\n      browserVersion = navigator.userAgent.substring(verOffset + 3)\n    }\n  }\n\n  // Chrome\n  else if ((verOffset = navigator.userAgent.indexOf('Chrome')) != -1) {\n    browser = 'Chrome'\n    browserVersion = navigator.userAgent.substring(verOffset + 7)\n  }\n  // Safari\n  else if ((verOffset = navigator.userAgent.indexOf('Safari')) != -1) {\n    browser = 'Safari'\n    browserVersion = navigator.userAgent.substring(verOffset + 7)\n    if ((verOffset = navigator.userAgent.indexOf('Version')) != -1) {\n      browserVersion = navigator.userAgent.substring(verOffset + 8)\n    }\n\n    // Chrome on iPad identifies itself as Safari. Actual results do not match what Google claims\n    //  at: https://developers.google.com/chrome/mobile/docs/user-agent?hl=ja\n    //  No mention of chrome in the user agent string. However it does mention CriOS, which presumably\n    //  can be keyed on to detect it.\n    if (navigator.userAgent.indexOf('CriOS') != -1) {\n      //Chrome on iPad spoofing Safari...correct it.\n      browser = 'Chrome'\n      //Don't believe there is a way to grab the accurate version number, so leaving that for now.\n    }\n  }\n  // Firefox\n  else if ((verOffset = navigator.userAgent.indexOf('Firefox')) != -1) {\n    browser = 'Firefox'\n    browserVersion = navigator.userAgent.substring(verOffset + 8)\n  }\n  // Other browsers\n  else if (\n    (nameOffset = navigator.userAgent.lastIndexOf(' ') + 1) <\n    (verOffset = navigator.userAgent.lastIndexOf('/'))\n  ) {\n    browser = navigator.userAgent.substring(nameOffset, verOffset)\n    browserVersion = navigator.userAgent.substring(verOffset + 1)\n    if (browser.toLowerCase() == browser.toUpperCase()) {\n      browser = navigator.appName\n    }\n  }\n  // trim the browser version string\n  if ((ix = browserVersion.indexOf(';')) != -1)\n    browserVersion = browserVersion.substring(0, ix)\n  if ((ix = browserVersion.indexOf(' ')) != -1)\n    browserVersion = browserVersion.substring(0, ix)\n  if ((ix = browserVersion.indexOf(')')) != -1)\n    browserVersion = browserVersion.substring(0, ix)\n\n  return [browser, browserVersion].join('-')\n}\n\nfunction getBrowserOsDetails() {\n  var os = 'unknown'\n  var clientStrings = [\n    { s: 'Windows 10', r: /(Windows 10.0|Windows NT 10.0)/ },\n    { s: 'Windows 8.1', r: /(Windows 8.1|Windows NT 6.3)/ },\n    { s: 'Windows 8', r: /(Windows 8|Windows NT 6.2)/ },\n    { s: 'Windows 7', r: /(Windows 7|Windows NT 6.1)/ },\n    { s: 'Windows Vista', r: /Windows NT 6.0/ },\n    { s: 'Windows Server 2003', r: /Windows NT 5.2/ },\n    { s: 'Windows XP', r: /(Windows NT 5.1|Windows XP)/ },\n    { s: 'Windows 2000', r: /(Windows NT 5.0|Windows 2000)/ },\n    { s: 'Windows ME', r: /(Win 9x 4.90|Windows ME)/ },\n    { s: 'Windows 98', r: /(Windows 98|Win98)/ },\n    { s: 'Windows 95', r: /(Windows 95|Win95|Windows_95)/ },\n    { s: 'Windows NT 4.0', r: /(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/ },\n    { s: 'Windows CE', r: /Windows CE/ },\n    { s: 'Windows 3.11', r: /Win16/ },\n    { s: 'Android', r: /Android/ },\n    { s: 'Open BSD', r: /OpenBSD/ },\n    { s: 'Sun OS', r: /SunOS/ },\n    { s: 'Chrome OS', r: /CrOS/ },\n    { s: 'Linux', r: /(Linux|X11(?!.*CrOS))/ },\n    { s: 'iOS', r: /(iPhone|iPad|iPod)/ },\n    { s: 'Mac OS X', r: /Mac OS X/ },\n    { s: 'Mac OS', r: /(Mac OS|MacPPC|MacIntel|Mac_PowerPC|Macintosh)/ },\n    { s: 'QNX', r: /QNX/ },\n    { s: 'UNIX', r: /UNIX/ },\n    { s: 'BeOS', r: /BeOS/ },\n    { s: 'OS/2', r: /OS\\/2/ },\n    {\n      s: 'Search Bot',\n      r: /(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\\/Teoma|ia_archiver)/,\n    },\n  ]\n  for (var id in clientStrings) {\n    var cs = clientStrings[id]\n    if (cs.r.test(navigator.userAgent)) {\n      os = cs.s\n      break\n    }\n  }\n\n  var osVersion = 'unknown'\n\n  if (/Windows/.test(os)) {\n    osVersion = /Windows (.*)/.exec(os)[1]\n    os = 'Windows'\n  }\n\n  switch (os) {\n    case 'Mac OS':\n    case 'Mac OS X':\n    case 'Android':\n      osVersion = /(?:Android|Mac OS|Mac OS X|MacPPC|MacIntel|Mac_PowerPC|Macintosh) ([\\.\\_\\d]+)/.exec(\n        navigator.userAgent\n      )[1]\n      break\n\n    case 'iOS':\n      osVersion = /OS (\\d+)_(\\d+)_?(\\d+)?/.exec(navigator.appVersion)\n      osVersion = osVersion[1] + '.' + osVersion[2] + '.' + (osVersion[3] | 0)\n      break\n  }\n  return [os, osVersion].join('-')\n}\n\n/**\n * For checking process.env always use `hasOwnProperty`\n * Some providers could throw an error when trying to access env variables that does not exists\n * @private */\nfunction getNodeRuntimeEnv() {\n  var runtimeEnvs = [\n    {\n      name: 'Netlify',\n      check: function() {\n        return process.env.hasOwnProperty('NETLIFY_IMAGES_CDN_DOMAIN')\n      },\n    },\n    {\n      name: 'Vercel',\n      check: function() {\n        return process.env.hasOwnProperty('VERCEL')\n      },\n    },\n    {\n      name: 'Heroku',\n      check: function() {\n        return (\n          process.env.hasOwnProperty('PATH') &&\n          process.env.PATH.indexOf('.heroku') !== -1\n        )\n      },\n    },\n    {\n      name: 'AWS Lambda',\n      check: function() {\n        return process.env.hasOwnProperty('AWS_LAMBDA_FUNCTION_VERSION')\n      },\n    },\n    {\n      name: 'GCP Cloud Functions',\n      check: function() {\n        return (\n          process.env.hasOwnProperty('_') &&\n          process.env._.indexOf('google') !== -1\n        )\n      },\n    },\n    {\n      name: 'GCP Compute Instances',\n      check: function() {\n        return process.env.hasOwnProperty('GOOGLE_CLOUD_PROJECT')\n      },\n    },\n    {\n      name: 'Azure Cloud Functions',\n      check: function() {\n        return process.env.hasOwnProperty(\n          'WEBSITE_FUNCTIONS_AZUREMONITOR_CATEGORIES'\n        )\n      },\n    },\n    {\n      name: 'Azure Compute',\n      check: function() {\n        return (\n          process.env.hasOwnProperty('ORYX_ENV_TYPE') &&\n          process.env.hasOwnProperty('WEBSITE_INSTANCE_ID') &&\n          process.env.ORYX_ENV_TYPE === 'AppService'\n        )\n      },\n    },\n    {\n      name: 'Mongo Stitch',\n      check: function() {\n        return typeof crossGlobal.StitchError === 'function'\n      },\n    },\n    {\n      name: 'Render',\n      check: function() {\n        return process.env.hasOwnProperty('RENDER_SERVICE_ID')\n      },\n    },\n    {\n      name: 'Begin',\n      check: function() {\n        return process.env.hasOwnProperty('BEGIN_DATA_SCOPE_ID')\n      },\n    },\n  ]\n  var detectedEnv = runtimeEnvs.find(env => env.check())\n\n  return detectedEnv ? detectedEnv.name : 'unknown'\n}\n\n/**\n * If defined, returns the given value. Otherwise, returns the default value.\n * @param {any} obj The given value.\n * @param {any} def The default value.\n * @private\n */\nfunction defaults(obj, def) {\n  if (obj === undefined) {\n    return def\n  } else {\n    return obj\n  }\n}\n\n/**\n * Used for functions that take an options objects.\n * Fills in defaults for options not provided.\n * Throws errors for provided options that aren't recognized.\n * A default value of `undefined` is used to indicate that the option must be provided.\n * @private\n */\nfunction applyDefaults(provided, defaults) {\n  var out = {}\n\n  for (var providedKey in provided) {\n    if (!(providedKey in defaults)) {\n      throw new Error('No such option ' + providedKey)\n    }\n    out[providedKey] = provided[providedKey]\n  }\n\n  for (var defaultsKey in defaults) {\n    if (!(defaultsKey in out)) {\n      out[defaultsKey] = defaults[defaultsKey]\n    }\n  }\n\n  return out\n}\n\n/**\n * Returns a new object without any keys where the value would be null or undefined.\n * @private\n * */\nfunction removeNullAndUndefinedValues(object) {\n  var res = {}\n  for (var key in object) {\n    var val = object[key]\n    if (val !== null && val !== undefined) {\n      res[key] = val\n    }\n  }\n  return res\n}\n\n/**\n * Returns a new object without any keys where the value would be undefined.\n * @private\n * */\nfunction removeUndefinedValues(object) {\n  var res = {}\n  for (var key in object) {\n    var val = object[key]\n    if (val !== undefined) {\n      res[key] = val\n    }\n  }\n  return res\n}\n\n/**\n * Returns a boolean stating if the given object has a given property\n * @private\n * */\nfunction checkInstanceHasProperty(obj, prop) {\n  return typeof obj === 'object' && obj !== null && Boolean(obj[prop])\n}\n\nfunction formatUrl(base, path, query) {\n  query = typeof query === 'object' ? querystringify(query) : query\n  return [\n    base,\n    path ? (path.charAt(0) === '/' ? '' : '/' + path) : '',\n    query ? (query.charAt(0) === '?' ? '' : '?' + query) : '',\n  ].join('')\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || ''\n\n  var pairs = [],\n    value,\n    key\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?'\n\n  for (key in obj) {\n    if (checkInstanceHasProperty(obj, key)) {\n      value = obj[key]\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undefined || isNaN(value))) {\n        value = ''\n      }\n\n      key = encode(key)\n      value = encode(value)\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue\n      pairs.push(key + '=' + value)\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : ''\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input)\n  } catch (e) {\n    return null\n  }\n}\n\n/**\n * Merge two objects into one\n * @param obj1\n * @param obj2\n * @returns obj3 a new object based on obj1 and obj2\n */\nfunction mergeObjects(obj1, obj2) {\n  var obj3 = {}\n  for (var attrname in obj1) {\n    obj3[attrname] = obj1[attrname]\n  }\n  for (var attrname in obj2) {\n    obj3[attrname] = obj2[attrname]\n  }\n  return obj3\n}\n\n/**\n * Resolves which Fetch API compatible function to use. If an override is\n * provided, returns the override. If no override and the global (window) has\n * \"fetch\" property, return the native fetch. Otherwise returns the cross-fetch polyfill.\n *\n * @param {?function} fetchOverride An Fetch API compatible function to use.\n * @returns {function} A Fetch API compatible function.\n * @private\n */\nfunction resolveFetch(fetchOverride) {\n  if (typeof fetchOverride === 'function') {\n    return fetchOverride\n  }\n\n  if (typeof crossGlobal.fetch === 'function') {\n    // NB. Rebinding to global is needed for Safari\n    return crossGlobal.fetch.bind(crossGlobal)\n  }\n\n  return require('cross-fetch')\n}\n\nfunction notifyAboutNewVersion() {\n  var isNotified\n  const checkAndNotify = checkNewVersion => {\n    if (!isNodeEnv() || isNotified || !checkNewVersion) return\n    function onResponse(latestVersion) {\n      var isNewVersionAvailable = latestVersion > packageJson.version\n      if (isNewVersionAvailable) {\n        console.info(\n          boxen(\n            'New ' +\n              packageJson.name +\n              ' version available ' +\n              chalk.dim(packageJson.version) +\n              chalk.reset(' → ') +\n              chalk.green(latestVersion) +\n              `\\nChangelog: https://github.com/${packageJson.repository}/blob/main/CHANGELOG.md`,\n            { padding: 1, borderColor: 'yellow' }\n          )\n        )\n      }\n    }\n\n    isNotified = true\n    resolveFetch()('https://registry.npmjs.org/' + packageJson.name)\n      .then(resp => resp.json())\n      .then(json => onResponse(json['dist-tags'].latest))\n      .catch(err => {\n        console.error('Unable to check new driver version')\n        console.error(err)\n      })\n  }\n\n  return checkAndNotify\n}\n\nmodule.exports = {\n  notifyAboutNewVersion: notifyAboutNewVersion,\n  crossGlobal: crossGlobal,\n  mergeObjects: mergeObjects,\n  formatUrl: formatUrl,\n  querystringify: querystringify,\n  inherits: inherits,\n  isNodeEnv: isNodeEnv,\n  getEnvVariable: getEnvVariable,\n  defaults: defaults,\n  applyDefaults: applyDefaults,\n  removeNullAndUndefinedValues: removeNullAndUndefinedValues,\n  removeUndefinedValues: removeUndefinedValues,\n  checkInstanceHasProperty: checkInstanceHasProperty,\n  getBrowserDetails: getBrowserDetails,\n  getBrowserOsDetails: getBrowserOsDetails,\n  getNodeRuntimeEnv: getNodeRuntimeEnv,\n  resolveFetch: resolveFetch,\n}\n"]},"metadata":{},"sourceType":"script"}